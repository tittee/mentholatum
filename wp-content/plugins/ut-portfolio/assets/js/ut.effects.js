!function(t){"use strict";t(document).ready(function(){function i(i){if(i){var e=t("#ut-portfolio-details-"+i).find(".active").prev(".ut-portfolio-detail"),a=t("#ut-portfolio-details-"+i).find(".active").next(".ut-portfolio-detail");e.length?t("#ut-portfolio-details-wrap-"+i).find(".prev-portfolio-details").animate({opacity:1},200,"easeInOutExpo",function(){t(this).css("visibility","visible")}):t("#ut-portfolio-details-wrap-"+i).find(".prev-portfolio-details").animate({opacity:0},200,"easeInOutExpo",function(){t(this).css("visibility","hidden")}),a.length?t("#ut-portfolio-details-wrap-"+i).find(".next-portfolio-details").animate({opacity:1},200,"easeInOutExpo",function(){t(this).css("visibility","visible")}):t("#ut-portfolio-details-wrap-"+i).find(".next-portfolio-details").animate({opacity:0},200,"easeInOutExpo",function(){t(this).css("visibility","hidden")}),o()}}function o(){t(".ut-portfolio-details-navigation").each(function(){var i=t(this),o=i.parent(),e=o.find(".active"),a=e.find(".ut-portfolio-media").height();a>0?(i.find(".next-portfolio-details").animate({top:a/2+45}),i.find(".prev-portfolio-details").animate({top:a/2+45})):(i.find(".next-portfolio-details").animate({top:o.height()/2+45}),i.find(".prev-portfolio-details").animate({top:o.height()/2+45}))})}function e(t){t&&setTimeout(function(){return t.parent().get(0).offsetHeight<t.parent().get(0).scrollHeight?void t.parent().height(t.parent().get(0).scrollHeight):void t.parent().height(t.height())},200)}function a(i){i&&t("#ut-portfolio-detail-"+i).find(".entry-content").fadeOut(400,function(){t(this).html(""),t(this).show()})}function n(i,o){o&&i.find("#ut-video-call-"+o).fadeOut(400,function(){t(this).html("")})}function s(t,i){i&&t.find("#portfolio-gallery-slider-"+i).hasClass("ut-sliderimages-loaded")&&t.find("#portfolio-gallery-slider-"+i).flexslider("destroy")}function l(i,o){if(i){var e=t("#ut-portfolio-detail-"+i),a=utPortfolio.ajaxurl;t.ajax({type:"POST",url:a,data:{action:"ut_get_portfolio_post_content",portfolio_id:i},success:function(t){return e.find(".entry-content").html(t).fitVids(),!1},complete:function(){o&&"function"==typeof o&&o()}})}}function d(i,o){if(i){var e=t("#ut-portfolio-detail-"+i),a=utPortfolio.ajaxurl;t.ajax({type:"POST",url:a,data:{action:"ut_get_portfolio_post",portfolio_id:i},success:function(t){return e.find(".ut-video-call").show().html(t).fitVids(),!1},complete:function(){o&&"function"==typeof o&&o()}})}}function r(t,i,o){if(t){var e=i.find("#ut-portfolio-detail-"+t).find(".ut-load-me"),a=e.data("original");e.attr("src")?o&&"function"==typeof o&&o():e.attr("src",a).one("load",function(){this.complete&&"undefined"!=typeof this.naturalWidth&&0!=this.naturalWidth?o&&"function"==typeof o&&o():alert("There is a broken image inside your portfolio: "+$this.attr("src",a))})}}function f(i,a,n){if(i){var s=a.find("#portfolio-gallery-slider-"+i);s.hasClass("ut-sliderimages-loaded")&&(s.flexslider({animation:"fade",controlNav:!1,animationLoop:!0,slideshow:!1,smoothHeight:!0,startAt:0,after:function(){e(a),o()}}),n&&"function"==typeof n&&n());var l=s.find(".ut-load-me"),d=l.length;d?l.each(function(){var i=t(this),l=i.data("original");i.attr("src",l).removeClass("ut-load-me").one("load",function(){this.complete&&"undefined"!=typeof this.naturalWidth&&0!=this.naturalWidth?--d||(s.flexslider({animation:"fade",controlNav:!1,animationLoop:!0,slideshow:!1,smoothHeight:!0,startAt:0,after:function(){e(a),o()}}).addClass("ut-sliderimages-loaded"),n&&"function"==typeof n&&n()):alert("There is a broken image inside your portfolio: "+i.attr("src",l))})}):n&&"function"==typeof n&&n()}}var u=t("img.portfolio-lazy");u.lazyload({event:"scroll",load:function(){t(this).animate({opacity:1},200),t(window).trigger("resize"),t.waypoints("refresh")},failure_limit:Math.max(u.length,0)});var c=1024,p=768,v=!0;t(window).width()<1024&&(c=t(window).width(),p=t(window).height(),v=!0),t('a[data-rel^="utPortfolio"]').prettyPhoto({social_tools:!1,deeplinking:!1,default_width:c,default_height:p,allow_resize:v,markup:'<div class="pp_pic_holder"> 						<div class="pp_top"> 							<div class="pp_left"></div> 							<div class="pp_middle"></div> 							<div class="pp_right"></div> 						</div> 						<div class="pp_content_container"> 							<div class="pp_left"> 							<div class="pp_right"> 								<div class="pp_content"> 									<div class="pp_loaderIcon"></div> 									<div class="pp_fade"> 										<a href="#" class="pp_expand" title="Expand the image">Expand</a> 										<div class="pp_hoverContainer"> 											<a class="pp_next" href="#">next</a> 											<a class="pp_previous" href="#">previous</a> 										</div> 										<div id="pp_full_res"></div> 										<div class="pp_details"> 											<div class="pp_nav"> 												<a href="#" class="pp_arrow_previous">Previous</a> 												<p class="currentTextHolder">0/0</p> 												<a href="#" class="pp_arrow_next">Next</a> 											</div> 											<div class="ppt">&nbsp;</div> 											<p class="pp_description"></p> 											{pp_social} 											<a class="pp_close" href="#">Close</a> 										</div> 									</div> 								</div> 							</div> 							</div> 						</div> 						<div class="pp_bottom"> 							<div class="pp_left"></div> 							<div class="pp_middle"></div> 							<div class="pp_right"></div> 						</div> 					</div> 					<div class="pp_overlay"></div>'}),t(".ut-hover").each(function(){var i=t(this).closest(".ut-portfolio-wrap").data("textcolor");t(this).find(".ut-hover-layer").css({color:i}),t(this).find(".ut-hover-layer").find(".portfolio-title").attr("style","color: "+i+" !important")}),t(".ut-hover").on("mouseenter touchstart",function(){var i=t(this).closest(".ut-portfolio-wrap").data("hovercolor"),o=t(this).closest(".ut-portfolio-wrap").data("opacity");t(this).find(".ut-hover-layer").css("background","rgba("+i+","+o+")"),t(this).find(".ut-hover-layer").css("opacity",1)}),t(".ut-hover").on("mouseleave touchend",function(){t(this).find(".ut-hover-layer").css("opacity",0)});var h=!1;t(window).smartresize(function(){o()}),t(document).on("click",".ut-portfolio-link",function(o){if(h)return!1;h=!0;var e=t(this).data("post"),u=t(this).data("wrap"),c=t("#ut-loader-"+u),p=t("#ut-portfolio-details-wrap-"+u),v=t("#ut-portfolio-details-"+u),g=p.find("#ut-portfolio-detail-"+e),m=v.find(".active").data("post"),y=v.find(".active").data("format"),w=p.closest("section").data("width"),_=g.data("format"),x=t("#header-section").outerHeight();c.stop(!0).fadeIn(400,function(){t.scrollTo(p,650,{easing:"easeInOutExpo",offset:-x-40,axis:"y",onAfter:function(){"video"===y&&n(v,m),"gallery"===y&&s(v,m),"fullwidth"===w&&v.addClass("grid-container"),e!==m&&a(m),v.find(".ut-portfolio-detail").removeClass("active").hide(),g.addClass("active").css("visibility","hidden").show().slideDown(800,"easeInOutExpo",function(){"gallery"===_?f(e,v,function(){l(e,function(){c.fadeOut(400,function(){p.addClass("show overflow-visible"),p.find(".ut-portfolio-details-navigation").addClass("show").data("single",e),g.css("visibility","visible").animate({opacity:1},400,"easeInOutExpo",function(){i(u),setTimeout(function(){p.height(v.outerHeight()+50)},200),t(window).trigger("scroll"),h=!1})})})}):"video"===_?d(e,function(){l(e,function(){c.fadeOut(400,function(){p.addClass("show overflow-visible"),p.find(".ut-portfolio-details-navigation").addClass("show").data("single",e),g.css("visibility","visible").animate({opacity:1},400,"easeInOutExpo",function(){i(u),setTimeout(function(){p.height(v.outerHeight()+50)},200),t(window).trigger("scroll"),h=!1})})})}):r(e,v,function(){l(e,function(){c.fadeOut(400,function(){p.addClass("show overflow-visible"),p.find(".ut-portfolio-details-navigation").addClass("show").data("single",e),g.css("visibility","visible").animate({opacity:1},400,"easeInOutExpo",function(){i(u),setTimeout(function(){p.height(v.outerHeight()+50)},200),t(window).trigger("scroll"),h=!1})})})})})}})}),o.preventDefault()}),t(document).on("click",".next-portfolio-details",function(o){if(h)return!1;h=!0;var e=t(this).data("wrap"),u=t("#ut-portfolio-details-wrap-"+e),c=u.closest("section").data("width"),p=t("#ut-portfolio-details-"+e),v=t("#ut-loader-"+e),g=p.find(".active").next().data("post"),m=p.find(".active").next().data("format"),y=p.find(".active").data("post"),w=p.find(".active").data("format"),_=p.find("#ut-portfolio-detail-"+g);"video"===w&&n(p,y),"gallery"===w&&s(p,y),"centered"!==c&&_.addClass("grid-container"),a(y),p.find("#ut-portfolio-detail-"+y).removeClass("active").fadeOut(function(){v.stop(!0).fadeIn(400,function(){_.addClass("active").css("visibility","hidden").slideDown(800,"easeInOutExpo",function(){"gallery"===m?f(g,p,function(){l(g,function(){v.fadeOut(400,function(){p.find(".ut-portfolio-details-navigation").data("single",g),_.css("visibility","visible").animate({opacity:1},400,"easeInOutExpo",function(){i(e),setTimeout(function(){u.height(p.outerHeight()+50)},200),h=!1})})})}):"video"===m?d(g,function(){l(g,function(){v.fadeOut(400,function(){p.find(".ut-portfolio-details-navigation").data("single",g),_.css("visibility","visible").animate({opacity:1},400,"easeInOutExpo",function(){i(e),setTimeout(function(){u.height(p.outerHeight()+50)},200),h=!1})})})}):r(g,p,function(){l(g,function(){v.fadeOut(400,function(){p.find(".ut-portfolio-details-navigation").data("single",g),_.css("visibility","visible").animate({opacity:1},400,"easeInOutExpo",function(){i(e),setTimeout(function(){u.height(p.outerHeight()+50)},200),h=!1})})})})})})}),o.preventDefault()}),t(document).on("click",".prev-portfolio-details",function(o){if(!h){h=!0;var e=t(this).data("wrap"),u=t("#ut-portfolio-details-wrap-"+e),c=u.closest("section").data("width"),p=t("#ut-portfolio-details-"+e),v=t("#ut-loader-"+e),g=p.find(".active").prev().data("post"),m=p.find(".active").prev().data("format"),y=p.find(".active").data("post"),w=p.find(".active").data("format"),_=p.find("#ut-portfolio-detail-"+g);"video"===w&&n(p,y),"gallery"===w&&s(p,y),"centered"!==c&&_.addClass("grid-container"),a(y),p.find("#ut-portfolio-detail-"+y).removeClass("active").fadeOut(function(){v.stop(!0).fadeIn(400,function(){_.addClass("active").css("visibility","hidden").slideDown(800,"easeInOutExpo",function(){"gallery"===m?f(g,p,function(){l(g,function(){v.fadeOut(400,function(){p.find(".ut-portfolio-details-navigation").data("single",g),_.css("visibility","visible").animate({opacity:1},400,"easeInOutExpo",function(){i(e),setTimeout(function(){u.height(p.outerHeight()+50)},200),h=!1})})})}):"video"===m?d(g,function(){l(g,function(){v.fadeOut(400,function(){p.find(".ut-portfolio-details-navigation").data("single",g),_.css("visibility","visible").animate({opacity:1},400,"easeInOutExpo",function(){i(e),setTimeout(function(){u.height(p.outerHeight()+50)},200),h=!1})})})}):r(g,p,function(){l(g,function(){v.fadeOut(400,function(){p.find(".ut-portfolio-details-navigation").data("single",g),_.css("visibility","visible").animate({opacity:1},400,"easeInOutExpo",function(){i(e),setTimeout(function(){u.height(p.outerHeight()+50)},200),h=!1})})})})})})}),o.preventDefault()}}),t(document).on("click",".close-portfolio-details",function(i){if(h)return!1;h=!0;var o=t(this).data("wrap"),e=t(this).parent().data("single"),l=t("#ut-portfolio-details-wrap-"+o),d=(t(this).data("post"),t("#ut-portfolio-detail-"+e).data("format"));l.find(".ut-portfolio-details-navigation").removeClass("show"),l.find("#ut-portfolio-detail-"+e).removeClass("active").animate({opacity:0},200,"easeInOutExpo",function(){t("#ut-portfolio-details-wrap-"+o).removeClass("show").removeClass("overflow-visible"),"video"===d&&n(l,e),"gallery"===d&&s(l,e),a(e),h=!1}),i.preventDefault()})})}(jQuery);